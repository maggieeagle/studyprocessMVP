<Window x:Class="UI.Views.UserEditWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Edit Profile" 
        Height="820" Width="450"
        WindowStartupLocation="CenterOwner"
        Background="{StaticResource BackgroundGradientBrush}"
        ResizeMode="NoResize">

    <Grid Margin="20">
        <Border Style="{StaticResource CardStyle}"
                VerticalAlignment="Center"
                Padding="28">
            <StackPanel>
                <TextBlock Text="👤" FontSize="40" HorizontalAlignment="Center" Margin="0,0,0,10"/>
                <TextBlock Text="Edit Profile" 
                           Style="{StaticResource HeadingStyle}"
                           FontSize="24"
                           HorizontalAlignment="Center"
                           Margin="0,0,0,6"/>
                <TextBlock Text="Update your personal information"
                           Style="{StaticResource SubheadingStyle}"
                           FontSize="13"
                           HorizontalAlignment="Center"
                           Margin="0,0,0,28"/>

                <Grid Margin="0,0,0,16">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="12"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>
                    <StackPanel Grid.Column="0">
                        <TextBlock Text="First Name" Style="{StaticResource LabelStyle}"/>
                        <TextBox Text="{Binding FirstName, UpdateSourceTrigger=PropertyChanged}" 
                                 Style="{StaticResource BaseTextBoxStyle}"/>
                    </StackPanel>
                    <StackPanel Grid.Column="2">
                        <TextBlock Text="Last Name" Style="{StaticResource LabelStyle}"/>
                        <TextBox Text="{Binding LastName, UpdateSourceTrigger=PropertyChanged}" 
                                 Style="{StaticResource BaseTextBoxStyle}"/>
                    </StackPanel>
                </Grid>

                <TextBlock Text="New Password" Style="{StaticResource LabelStyle}"/>
                <PasswordBox x:Name="PassBox"
                             Style="{StaticResource BasePasswordBoxStyle}"
                             PasswordChanged="PassBox_PasswordChanged"
                             Margin="0,0,0,4"/>
                <TextBlock Text="Leave blank to keep current password"
                           Foreground="{StaticResource TextMutedBrush}"
                           FontSize="11"
                           Margin="0,0,0,20"/>

                <Border Style="{StaticResource ErrorBannerStyle}"
                        Margin="0,0,0,12"
                        Visibility="{Binding ErrorMessage, Converter={StaticResource StringToVisibility}}">
                    <StackPanel Orientation="Horizontal">
                        <TextBlock Text="⚠" Foreground="{StaticResource ErrorBrush}" Margin="0,0,10,0" FontSize="14"/>
                        <TextBlock Text="{Binding ErrorMessage}" Foreground="{StaticResource ErrorBrush}" TextWrapping="Wrap"/>
                    </StackPanel>
                </Border>

                <Border Style="{StaticResource SuccessBannerStyle}"
                        Margin="0,0,0,12"
                        Visibility="{Binding SuccessMessage, Converter={StaticResource StringToVisibility}}">
                    <StackPanel Orientation="Horizontal">
                        <TextBlock Text="✓" Foreground="{StaticResource SuccessBrush}" Margin="0,0,10,0" FontSize="14"/>
                        <TextBlock Text="{Binding SuccessMessage}" Foreground="{StaticResource SuccessBrush}"/>
                    </StackPanel>
                </Border>

                <Button Content="Save Changes"
                        Command="{Binding SaveCommand}"
                        Style="{StaticResource PrimaryButtonStyle}"
                        Margin="0,0,0,12"/>

                <Button Content="Cancel"
                        Click="Cancel_Click"
                        Style="{StaticResource SecondaryButtonStyle}"
                        Margin="0,0,0,24"/>

                <Border BorderBrush="{StaticResource BorderBrush}"
                        BorderThickness="0,1,0,0"
                        Padding="0,20,0,0">
                    <StackPanel>
                        <TextBlock Text="Danger Zone"
                                   Foreground="{StaticResource ErrorBrush}"
                                   FontSize="12"
                                   FontWeight="SemiBold"
                                   Margin="0,0,0,12"/>
                        <Button Content="Delete Account"
                                Command="{Binding DeleteCommand}"
                                Style="{StaticResource DangerButtonStyle}"/>
                        <TextBlock Text="This action cannot be undone. All your data will be permanently deleted."
                                   Foreground="{StaticResource TextMutedBrush}"
                                   FontSize="11"
                                   TextWrapping="Wrap"
                                   Margin="0,8,0,0"/>
                    </StackPanel>
                </Border>
            </StackPanel>
        </Border>
    </Grid>
</Window>
